{"version":3,"sources":["index.js"],"names":["BASE_URL","API_KEY","console","dir","window","scrollBy","queryParams","page","perPage","galleryRef","document","querySelector","formRef","loadMoreBut","query","onSubmit","e","preventDefault","setAttribute","innerHTML","elements","searchQuery","value","trim","fetchImages","then","images","renderMarkup","hits","length","alert","totalHits","Math","ceil","log","removeAttribute","height","cardHeight","firstElementChild","getBoundingClientRect","top","behavior","fetch","response","ok","Error","statusText","json","markup","map","webformatURL","likes","views","comments","downloads","join","insertAdjacentHTML","onLoadMoreClick","addEventListener"],"mappings":";;;AAmIC,aAnID,QAAA,oBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAEhBC,QAAQC,IAAIC,OAAOC,UAQnB,MAAMC,EAAe,yDACrB,IAAIC,EAAO,EACX,MAAMC,EAAU,GAEVC,EAAaC,SAASC,cAAc,YACpCC,EAAUF,SAASC,cAAc,gBACjCE,EAAcH,SAASC,cAAc,cAE3C,IAAIG,EAAQ,KAKZ,SAASC,EAASC,GAChBA,EAAEC,iBACFJ,EAAYK,aAAa,SAAU,QACnCX,EAAO,EACPE,EAAWU,UAAY,GACvBL,EAAQF,EAAQQ,SAASC,YAAYC,MAAMC,OAC3CX,EAAQQ,SAASC,YAAYC,MAAQR,EAEvB,KAAVA,EAKJU,IAAcC,KAAKC,IAKbA,GAHJC,EAAaD,GACbnB,GAAQ,EAEmB,IAAvBmB,EAAOE,KAAKC,OAGd,OAFAC,MAAM,iFACNjB,EAAYK,aAAa,SAAU,QAIrCY,0BAA0BJ,EAAOK,qBAE7BxB,EAAOyB,KAAKC,KAAKP,EAAOK,UAAYvB,IACtCK,EAAYK,aAAa,SAAU,QACnChB,QAAQgC,IAAK,+DAEbrB,EAAYsB,gBAAgB,UAGxB,MAAEC,OAAQC,GAAe3B,SAC5BC,cAAc,YACd2B,kBAAkBC,wBAErBnC,OAAOC,SAAS,CACdmC,IAAkB,GAAbH,EACLI,SAAU,aA9BZX,MAAM,4EAmCV,SAASN,IACAkB,OAAAA,SACF1C,SAAgBC,OAAaa,KAASR,UAAoBC,cAAiBC,KAC9EiB,KAAKkB,IACD,IAACA,EAASC,GACN,MAAA,IAAIC,MAAMF,EAASG,YAEpBH,OAAAA,EAASI,SAIpB,SAASpB,EAAaD,GACdsB,MAAAA,EAAStB,EAAOE,KACnBqB,IAAI,EAAGC,aAAAA,EAAcC,MAAAA,EAAOC,MAAAA,EAAOC,SAAAA,EAAUC,UAAAA,kEAG1BJ,4KAINC,6GAIAC,gHAIAC,iHAIAC,uEAMbC,KAAK,IACR9C,EAAW+C,mBAAmB,YAAaR,GAG7C,SAASS,IACPjC,IAAcC,KAAKC,IACjBC,EAAaD,IACbnB,GAAQ,GAEGyB,KAAKC,KAAKP,EAAOK,UAAYvB,KACtCK,EAAYK,aAAa,SAAU,QACnChB,QAAQgC,IAAK,+DAGT,MAAEE,OAAQC,GAAe3B,SAC5BC,cAAc,YACd2B,kBAAkBC,wBAErBnC,OAAOC,SAAS,CACdmC,IAAkB,GAAbH,EACLI,SAAU,aAzGhB7B,EAAQ8C,iBAAiB,SAAU3C,GACnCF,EAAY6C,iBAAiB,QAASD","file":"src.8fc8b389.js","sourceRoot":"../src","sourcesContent":["import './sass/main.scss';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '14763371-8ad954d112ffa98330dee37e7';\n\nconsole.dir(window.scrollBy);\n\n// key - твой уникальный ключ доступа к API.\n// q - термин для поиска. То, что будет вводить пользователь.\n// image_type - тип изображения. Мы хотим только фотографии, поэтому задай значение photo.\n// orientation - ориентация фотографии. Задай значение horizontal.\n// safesearch - фильтр по возрасту. Задай значение true.\n\nconst queryParams = `image_type=all&orientation=horizontal&safesearch=false`;\nlet page = 1;\nconst perPage = 40;\n\nconst galleryRef = document.querySelector('.gallery');\nconst formRef = document.querySelector('.search-form');\nconst loadMoreBut = document.querySelector('.load-more');\n\nlet query = null;\n\nformRef.addEventListener('submit', onSubmit);\nloadMoreBut.addEventListener('click', onLoadMoreClick);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  loadMoreBut.setAttribute('hidden', 'true');\n  page = 1;\n  galleryRef.innerHTML = '';\n  query = formRef.elements.searchQuery.value.trim();\n  formRef.elements.searchQuery.value = query;\n\n  if (query === '') {\n    alert('Sorry, there are no images matching your search query. Please try again.');\n    return;\n  }\n\n  fetchImages().then(images => {\n    // console.dir(images);\n    renderMarkup(images);\n    page += 1;\n\n    if (images.hits.length === 0) {\n      alert('Sorry, there are no images matching your search query. Please try again.');\n      loadMoreBut.setAttribute('hidden', 'true');\n      return;\n    }\n\n    alert(`Hooray! We found ${images.totalHits} images.`);\n\n    if (page > Math.ceil(images.totalHits / perPage)) {\n      loadMoreBut.setAttribute('hidden', 'true');\n      console.log(`We're sorry, but you've reached the end of search results.`);\n    } else {\n      loadMoreBut.removeAttribute('hidden');\n    }\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 10,\n      behavior: 'smooth',\n    });\n  });\n}\n\nfunction fetchImages() {\n  return fetch(\n    `${BASE_URL}?key=${API_KEY}&q=${query}&${queryParams}&page=${page}&per_page=${perPage}`,\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    return response.json();\n  });\n}\n\nfunction renderMarkup(images) {\n  const markup = images.hits\n    .map(({ webformatURL, likes, views, comments, downloads }) => {\n      return `\n        <div class=\"photo-card\">\n            <img src=\"${webformatURL}\" width=\"305\" height=\"205\" alt=\"\" loading=\"lazy\" />\n            <div class=\"info\">\n              <p class=\"info-item\">\n                <b>Likes</b>\n                ${likes}\n              </p>\n              <p class=\"info-item\">\n                <b>Views</b>\n                ${views}\n              </p>\n              <p class=\"info-item\">\n                <b>Comments</b>\n                ${comments}\n              </p>\n              <p class=\"info-item\">\n                <b>Downloads</b>\n                ${downloads}\n              </p>\n            </div>\n        </div>\n        `;\n    })\n    .join('');\n  galleryRef.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onLoadMoreClick() {\n  fetchImages().then(images => {\n    renderMarkup(images);\n    page += 1;\n\n    if (page > Math.ceil(images.totalHits / perPage)) {\n      loadMoreBut.setAttribute('hidden', 'true');\n      console.log(`We're sorry, but you've reached the end of search results.`);\n    }\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 11,\n      behavior: 'smooth',\n    });\n  });\n}\n"]}